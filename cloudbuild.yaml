# https://cloud.google.com/container-builder/docs/tutorials/creating-a-custom-build-step
steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/autobuild-ruby187', '--build-arg=VERID=$TAG_NAME', '.']
  dir: 'gke/docker-apps/ruby-1.8.7/'
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/autobuild-ubuhello', '--build-arg=VERID=$TAG_NAME', '.']
  dir: 'gke/docker-apps/ubuntu-hello/'
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/autobuild-niftystore', '--build-arg=VERID=$TAG_NAME', '.']
  dir: 'gke/docker-apps/ricniftystore/'
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/auto-pasta', '--build-arg=VERID=$TAG_NAME', '.']
  dir: 'gke/docker-apps/pasta/'
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/auto-addressbook', '--build-arg=VERID=$TAG_NAME', '.']
  dir: 'gke/docker-apps/ric_addressbook/'

images:
  - 'gcr.io/$PROJECT_ID/auto-addressbook'
  - 'gcr.io/$PROJECT_ID/auto-pasta'
  - 'gcr.io/$PROJECT_ID/autobuild-niftystore'
  - 'gcr.io/$PROJECT_ID/autobuild-ruby187'
  - 'gcr.io/$PROJECT_ID/autobuild-ubuhello'
